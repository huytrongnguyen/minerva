{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Facebook Marketing API Insights Raw Data Contract (v24.0)",
  "description": "Raw response structure from /insights endpoint. Array of daily/aggregated records.",
  "type": "object",
  "properties": {
    "data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "campaign_id": { "type": ["string", "null"], "description": "Campaign ID (when level includes campaigns)" },
          "adset_id": { "type": ["string", "null"], "description": "Ad Set ID" },
          "ad_id": { "type": ["string", "null"], "description": "Ad ID (when level=ad)" },
          "account_id": { "type": ["string", "null"], "description": "Ad Account ID (act_...)" },
          "date_start": { "type": "string", "format": "date", "description": "Start of reporting period (YYYY-MM-DD)" },
          "date_stop": { "type": "string", "format": "date", "description": "End of reporting period (YYYY-MM-DD)" },
          "impressions": { "type": ["string", "integer"], "description": "Number of impressions" },
          "reach": { "type": ["string", "integer", "null"], "description": "Unique users reached (limited with breakdowns >13mo)" },
          "spend": { "type": ["string", "number"], "description": "Amount spent (account currency)" },
          "clicks": { "type": ["string", "integer"], "description": "Total link clicks + other interactions" },
          "unique_clicks": { "type": ["string", "integer", "null"], "description": "Unique users who clicked (expensive)" },
          "cpm": { "type": ["string", "number", "null"], "description": "Cost per 1,000 impressions" },
          "cpp": { "type": ["string", "number", "null"], "description": "Cost per person reached" },
          "actions": {
            "type": ["array", "null"],
            "items": {
              "type": "object",
              "required": ["action_type", "value"],
              "properties": {
                "action_type": { "type": "string", "description": "e.g., 'link_click', 'purchase', 'offsite_conversion.fb_pixel_purchase'" },
                "value": { "type": ["string", "number"], "description": "Count of this action" },
                "1d_click": { "type": ["string", "number", "null"], "description": "Value in 1-day click window (if requested)" },
                "1d_view": { "type": ["string", "number", "null"], "description": "Value in 1-day view window" }
              }
            },
            "description": "Breakdown of conversion/action types"
          },

          "cost_per_action_type": {
            "type": ["array", "null"],
            "items": { "$comment": "similar to actions but with cost values" },
            "description": "Cost per action type (parallel to actions)"
          },
          "total_actions": { "type": ["string", "integer", "null"] },
          "conversions": { "type": ["string", "integer", "null"] },
          "frequency": { "type": ["string", "number", "null"], "description": "Average frequency (limited with breakdowns)" },
          "age": { "type": ["string", "null"], "description": "e.g., '18-24'" },
          "gender": { "type": ["string", "null"], "description": "e.g., 'male'" },
          "country": { "type": ["string", "null"] },
          "placement": { "type": ["string", "null"], "description": "e.g., 'facebook'" },
          "ad_name": { "type": ["string", "null"], "description": "Ad creative name (if expanded)" },
          "campaign_name": { "type": ["string", "null"] }
        },
        "required": ["date_start", "date_stop", "impressions", "spend"]
      }
    },
    "paging": {
      "type": ["object", "null"],
      "description": "Pagination info - handle for large results"
    }
  },
  "required": ["data"]
}
{
  "apiVersion": "v3.1.0",
  "kind": "DataContract",
  "id": "facebook_ads",
  "name": "Facebook Ads Insights",
  "version": "1.0.0",
  "status": "active",
  "domain": "advertising",
  "description": "Raw performance data from Facebook Marketing API Insights endpoint (v24.0). Contains campaign, ad set, and ad-level metrics for UA and remarketing campaigns. One row per date + level + breakdown combination.",
  "schema": [{
    "name": "facebook_ads",
    "physicalType": "file",
    "description": "Raw daily performance data from Facebook Ads API (v24.0). One row per date + level + breakdown combination.",
    "properties": [
      {
        "name": "date_stop",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "date", "pattern": "yyyy-MM-dd"},
        "required": true,
        "description": "The end date for your data. This is controlled by the date range you've selected for your reporting view.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "date_start",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "date", "pattern": "yyyy-MM-dd"},
        "required": true,
        "description": "The start date for your data. This is controlled by the date range you've selected for your reporting view.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "account_id",
        "logicalType": "string",
        "required": true,
        "description": "The ID number of your ad account, which groups your advertising activity. Your ad account includes your campaigns, ads and billing.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "account_name",
        "logicalType": "string",
        "description": "The name of your ad account, which groups your advertising activity. Your ad account includes your campaigns, ads and billing."
      },
      {
        "name": "campaign_id",
        "logicalType": "string",
        "required": true,
        "description": "The unique ID number of the ad campaign you're viewing in reporting. Your campaign contains ad sets and ads.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "campaign_name",
        "logicalType": "string",
        "description": "The name of the ad campaign you're viewing in reporting. Your campaign contains ad sets and ads."
      },
      {
        "name": "adset_id",
        "logicalType": "string",
        "required": true,
        "description": "The unique ID of the ad set you're viewing in reporting. An ad set is a group of ads that share the same budget, schedule, delivery optimization and targeting.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "adset_name",
        "logicalType": "string",
        "description": "The name of the ad set you're viewing in reporting. An ad set is a group of ads that share the same budget, schedule, delivery optimization and targeting."
      },
      {
        "name": "ad_id",
        "logicalType": "string",
        "required": true,
        "description": "The unique ID of the ad you're viewing in reporting.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0}
        ]
      },
      {
        "name": "ad_name",
        "logicalType": "string",
        "description": "The name of the ad you're viewing in reporting."
      },
      {
        "name": "impressions",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "required": true,
        "description": "The number of times your ads were on screen.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0},
          {"type": "sql", "query": "SELECT COUNT(*) FROM {object} WHERE CAST({property} AS BIGINT) < 0", "mustBe": 0}
        ]
      },
      {
        "name": "clicks",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "required": true,
        "description": "The number of clicks on your ads.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0},
          {"type": "sql", "query": "SELECT COUNT(*) FROM {object} WHERE CAST({property} AS BIGINT) < 0", "mustBe": 0}
        ]
      },
      {
        "name": "spend",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "required": true,
        "description": "The estimated total amount of money you've spent on your campaign, ad set or ad during its schedule. This metric is estimated.",
        "quality": [
          {"metric": "nullValues", "mustBe": 0},
          {"type": "sql", "query": "SELECT COUNT(*) FROM {object} WHERE CAST({property} AS DOUBLE) < 0", "mustBe": 0},
          {"type": "sql", "query": "SELECT COUNT(*) FROM {object} WHERE CAST({property} AS DOUBLE) > 10000", "mustBe": 0, "severity": "warning"}
        ]
      },
      {
        "name": "objective",
        "logicalType": "string",
        "description": "The objective reflecting the goal you want to achieve with your advertising. It may be different from the selected objective of the campaign in some cases."
      },
      {
        "name": "impression_device",
        "logicalType": "string",
        "description": "impression_device"
      },
      {
        "name": "country",
        "logicalType": "string",
        "description": "country"
      },
      {
        "name": "reach",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "description": "The number of Accounts Center accounts that saw your ads at least once. Reach is different from impressions, which may include multiple views of your ads by the same Accounts Center accounts. This metric is estimated."
      },
      {
        "name": "inline_post_engagement",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "description": "The total number of actions that Accounts Center accounts take involving your ads. Inline post engagements use a fixed 1-day-click attribution window."
      },
      {
        "name": "cost_per_inline_post_engagement",
        "logicalType": "string",
        "logicalTypeOptions": {"format": "number"},
        "description": "The average cost of each inline post engagement."
      }
    ],
    "quality": [
      {"metric": "rowCount", "mustBeGreaterThan": 0}
    ]
  }],
  "slaProperties": [
    {"property": "frequency", "value": 1, "unit": "d"}
  ],
  "servers": [{
    "server": "minio",
    "type": "s3",
    "location": "s3a://lakehouse/facebook_ads/{account_id}/{date_stop}",
    "format": "json"
  }],
  "customProperties": [
    {"name": "reference", "value": "https://developers.facebook.com/docs/marketing-api/reference/ad-account/insights/", "description": "Official API Reference"},
    {"name": "changelog", "value": "https://developers.facebook.com/docs/graph-api/changelog/version-24.0/", "description": "Changelog v24.0"}
  ]
}